name: 'Install dependencies'
description: "Build python package on python"

inputs:
  PROJECT_NAME:
    description: 'project name'
    required: true
  
runs:
  using: "composite"
  steps:
    - name: Replace Token
      shell: bash
      run: |
        ls -l
        find . -type f -exec sed -i "s/__PROJECT_NAME__/${{ env.PROJECT_NAME }}/g" {} +
      env:
        PROJECT_NAME: ${{ inputs.PROJECT_NAME }}
    - name: Install poetry packages
      shell: bash
      run: |
        python -m pip install --upgrade pip
        pipx install poetry==1.8.2

    - name: Setup python
      id: setup-python
      uses: actions/setup-python@v5
      with:
        python-version: '3.12'
        architecture: x64
        cache: 'poetry'
        cache-dependency-path: '**/poetry.lock'

    - name: Install python packages
      shell: bash
      run: poetry install --no-interaction
      